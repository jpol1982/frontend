



<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"  href="styles/movimiento/movimiento.css" />
    

    <title>Simulador de Movimiento</title>
    
</head>





<body>

    <!-- Contenedor de cartas de acción -->
    <div class="cartas-container" id="cartas-container">
        <!-- Las cartas se generarán dinámicamente -->
    </div>

    <!-- Zona donde se colocan las cartas para ejecutar -->
    <div id="zona-drop">
        Arrastra tus movimientos aqui
    </div>

    <!-- Botón para ejecutar las acciones -->
    <button id="ejecutar-btn" disabled>Ejecutar</button>

    <!-- Escenario donde se mueve el personaje -->
    <div class="escenario"  style="background-image: url('img/figuras.jpg')">
        <!-- Personaje que se moverá -->
        <div class="personaje" id="personaje">
            <img src="img/robotderecha.jpg" alt="Personaje">
        </div>
    </div>

    <script>
        // Objeto con las URLs de las imágenes para cada acción
        const imagenesCartas = {
            girarIzq: 'img/girarIzq.png',
            girarDer: 'img/girarDer.png',
            avanzar: 'img/avanzar.png',
            retroceder: 'img/retroceder.png'
        };

        // Crear las cartas dinámicamente
        const cartasContainer = document.getElementById('cartas-container');
        for (const [accion, urlImagen] of Object.entries(imagenesCartas)) {
            const carta = document.createElement('div');
            carta.classList.add('carta');
            carta.setAttribute('draggable', 'true');
            carta.setAttribute('data-action', accion);

            const img = document.createElement('img');
            img.src = urlImagen;
            img.alt = accion;

            carta.appendChild(img);
            cartasContainer.appendChild(carta);

            carta.addEventListener('dragstart', e => {
                e.dataTransfer.setData('text/plain', accion);
            });
        }

        const personaje = document.getElementById('personaje');

        // Estado inicial del personaje
        let angulo = 0;
        let posicionX = 12; // Porcentaje del left
        let posicionY = 86; // Porcentaje del top

        // Lista de instrucciones (girarIzq, girarDer, avanzar, retroceder)
        const instrucciones = [];

        // Función para mover o girar al personaje
        function moverPersonaje(accion) {
            switch (accion) {
                case 'girarIzq':
                    angulo -= 90; // Girar 90 grados a la izquierda
                    break;
                case 'girarDer':
                    angulo += 90; // Girar 90 grados a la derecha
                    break;
                case 'avanzar':
                    // Avanzar en la dirección en que está mirando el personaje
                    posicionX += 25 * Math.cos(angulo * Math.PI / 180);
                    posicionY += 25 * Math.sin(angulo * Math.PI / 180);
                    break;
                case 'retroceder':
                    // Retroceder en la dirección opuesta a la que está mirando
                    posicionX -= 25 * Math.cos(angulo * Math.PI / 180);
                    posicionY -= 25 * Math.sin(angulo * Math.PI / 180);
                    break;
            }

            // Asegurarse de que el personaje no salga de los límites del escenario
            if (posicionX < 0) posicionX = 0;
            if (posicionX > 100) posicionX = 100;
            if (posicionY < 0) posicionY = 0;
            if (posicionY > 100) posicionY = 100;

            // Actualizar la posición y el ángulo del personaje
            personaje.style.transform = `translate(-50%, -50%) rotate(${angulo}deg)`;
            personaje.style.left = `${posicionX}%`;
            personaje.style.top = `${posicionY}%`;
        }

        // Zona donde se dejan caer las cartas
        const zonaDrop = document.getElementById('zona-drop');
        zonaDrop.addEventListener('dragover', e => {
            e.preventDefault();
        });

        zonaDrop.addEventListener('drop', e => {
            e.preventDefault();
            const action = e.dataTransfer.getData('text/plain');
            instrucciones.push(action);

            const carta = document.createElement('div');
            carta.classList.add('carta');
            const img = document.createElement('img');
            img.src = imagenesCartas[action]; // Asigna la imagen desde el objeto
            img.alt = action;
            carta.appendChild(img);
            zonaDrop.appendChild(carta);

            document.getElementById('ejecutar-btn').disabled = false;
        });

        // Función para ejecutar las instrucciones en secuencia
        function ejecutarInstrucciones() {
            let index = 0;
            function ejecutarPaso() {
                if (index >= instrucciones.length) return;

                const instruccion = instrucciones[index];
                moverPersonaje(instruccion);

                index++;
                setTimeout(() => ejecutarPaso(), 500); // Pausa entre cada paso
            }
            ejecutarPaso();
        }

        // Botón para ejecutar las instrucciones
        document.getElementById('ejecutar-btn').addEventListener('click', () => {
            ejecutarInstrucciones();
        });
    </script>

</body>
</html>